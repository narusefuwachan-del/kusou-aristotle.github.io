<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>空想世界アリストテレス神殿案内板</title>

  <link rel="icon" href="/favicon.png">
  <link rel="icon" href="/images/favicon.png" type="image/png">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    *{ box-sizing:border-box; }
    html,body{ margin:0; padding:0; width:100%; height:100%; }

    body{
      font-family:"Shippori Mincho","Hiragino Mincho ProN","Yu Mincho","MS Mincho",serif;
      color:#fff;
      background:#000;
      overflow-x:hidden;
    }

    /* ================= splash ================= */
    .splash{
      position: fixed;
      inset: 0;
      background: #f5f7fb;
      display: grid;
      place-items: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 700ms ease;
    }
    .splash.hide{ opacity:0; }

    .splash-inner{
      opacity: 0;
      transform: scale(1.08);
      transition: opacity 700ms ease, transform 700ms ease;
    }
    .splash.show .splash-inner{
      opacity: 1;
      transform: scale(1);
    }
    .splash.hide .splash-inner{
      opacity: 0;
      transform: scale(0.82);
    }

    .splash-inner img{
      width: min(90vw, 520px);
      display:block;
    }

    /* ================= hero ================= */
    .hero{
      position: relative;
      height: min(92vh, 900px);
      overflow: hidden;
      background:#0b0b0f;
    }

    /* 背景（紫空） */
    .hero-bg{
      position:absolute;
      inset:0;
      background: url("/images/home/sora.png") center / cover no-repeat;
      z-index:1;
    }

    /* 鳥居 */
    .hero-torii{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      z-index:2;

      transform: scale(0.86);
      opacity: 0;
      filter: blur(1px);

      transition:
        transform 900ms cubic-bezier(.2,.9,.2,1),
        opacity   900ms cubic-bezier(.2,.9,.2,1),
        filter    900ms cubic-bezier(.2,.9,.2,1);
      transition-delay: 120ms;
    }

    /* 立ち絵（tatie.png） */
    .hero-chara{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      z-index:3;

      transform: translateY(60px);
      opacity: 0;

      transition:
        transform 900ms cubic-bezier(.2,.9,.2,1),
        opacity   900ms cubic-bezier(.2,.9,.2,1);
      transition-delay: 520ms;
    }

    /* 再生状態 */
    .hero.play .hero-torii{
      transform: scale(1);
      opacity: 1;
      filter: blur(0);
    }
    .hero.play .hero-chara{
      transform: translateY(0);
      opacity: 1;
    }

    /* 動きが苦手な人 */
    @media (prefers-reduced-motion: reduce){
      .hero-torii,.hero-chara{
        transition:none;
        transform:none;
        opacity:1;
        filter:none;
      }
    }

    /* ================= header ================= */
    .header{
      position: fixed;
      top:0; left:0; right:0;
      z-index:60;
      display:flex;
      justify-content:flex-end;
      padding:12px 16px;
    }
    .menu-btn{
      font-size:22px;
      background:none;
      border:none;
      color:#fff;
      cursor:pointer;
    }

    /* ================= menu ================= */
    .overlay{
      position: fixed;
      inset:0;
      background:rgba(0,0,0,.55);
      opacity:0;
      pointer-events:none;
      transition:.25s;
      z-index:1000;
    }
    .overlay.open{ opacity:1; pointer-events:auto; }

    .menu{
      position: fixed;
      top:0; right:0;
      width:340px;
      max-width:78vw;
      height:100vh;
      background:rgba(0,0,0,.86);
      backdrop-filter: blur(10px);
      transform:translateX(100%);
      transition:.25s;
      z-index:1001;
      padding:18px 16px;
    }
    .menu.open{ transform:translateX(0); }

    .menu a{
      display:block;
      padding:14px 6px;
      color:#fff;
      font-weight:700;
      text-decoration:none;
      border-bottom:1px solid rgba(255,255,255,.1);
    }
  </style>
</head>

<body>

  <!-- hero -->
  <section class="hero" id="hero">
    <div class="hero-bg"></div>
    <img class="hero-torii" src="/images/home/torii.png" alt="">
    <img class="hero-chara" src="/images/home/tatie.png" alt="">
  </section>

  <!-- splash -->
  <div id="splash" class="splash">
    <div class="splash-inner">
      <img src="/images/logo.png" alt="空想世界アリストテレス">
    </div>
  </div>

  <!-- header -->
  <header class="header">
    <button class="menu-btn" id="menuBtn">☰</button>
  </header>

  <!-- menu -->
  <div id="overlay" class="overlay"></div>
  <nav id="menu" class="menu">
    <a href="/">Home</a>
    <a href="/character/">Character</a>
    <a href="/story/">Story</a>
    <a href="/guide/">Guide</a>
  </nav>

  <script>
    // ===== menu =====
    const menu = document.getElementById("menu");
    const overlay = document.getElementById("overlay");
    document.getElementById("menuBtn").onclick = () => {
      menu.classList.add("open");
      overlay.classList.add("open");
    };
    overlay.onclick = () => {
      menu.classList.remove("open");
      overlay.classList.remove("open");
    };

    // ===== splash → hero animation =====
    window.addEventListener("load", async () => {
      const splash = document.getElementById("splash");
      const hero = document.getElementById("hero");

      // 画像読み込み待ち（重要）
      const imgs = document.querySelectorAll(".hero img");
      await Promise.all([...imgs].map(img =>
        img.decode ? img.decode().catch(()=>{}) :
        new Promise(res => img.complete ? res() : img.onload = res)
      ));

      requestAnimationFrame(() => splash.classList.add("show"));

      setTimeout(() => {
        hero.classList.add("play");
        splash.classList.add("hide");
        setTimeout(() => splash.remove(), 750);
      }, 1200);
    });
  </script>

</body>
</html>
