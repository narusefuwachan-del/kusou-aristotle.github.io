<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Character | 空想世界アリストテレス</title>
<link rel="icon" href="/favicon.png">

<style>
@font-face{
  font-family:"Kazuki Reiwa";
  src:url("/fonts/KazukiReiwa-Light.ttf") format("truetype");
  font-weight:300;
  font-display:swap;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family:"Kazuki Reiwa",serif;
  background:#0b0b0f;
  color:#fff;
  overflow-x:hidden;
}

/* ================= HEADER ================= */
.header{
  position:sticky;top:0;z-index:60;
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 16px;
  background:rgba(0,0,0,.4);
  backdrop-filter:blur(8px);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.site-title{color:#fff;text-decoration:none;letter-spacing:.08em}
.menu-btn{font-size:22px;background:none;border:none;color:#fff}

/* ================= GRID ================= */
.container{
  max-width:1100px;
  margin:0 auto;
  padding:56px 16px 80px;
  text-align:center;
}
.title-ruby{font-size:13px;letter-spacing:.35em;opacity:.55}
.page-title{font-size:40px;letter-spacing:.16em;font-weight:300}

.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
}
@media(min-width:700px){
  .grid{grid-template-columns:repeat(4,1fr)}
}
.card{
  position:relative;
  aspect-ratio:3/2;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.25);
  cursor:pointer;
}
.card img{width:100%;height:100%;object-fit:cover}
.num{
  position:absolute;
  right:12px;bottom:8px;
  font-size:32px;opacity:.85;
}

/* ================= PROFILE MODAL ================= */
.profileOverlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.72);
  opacity:0;pointer-events:none;
  transition:.22s;
  z-index:2100;
}
.profileOverlay.open{opacity:1;pointer-events:auto}

.profileModal{
  position:fixed;inset:0;
  display:grid;
  place-items:end center;
  opacity:0;pointer-events:none;
  transition:.22s;
  z-index:2101;
}
.profileModal.open{opacity:1;pointer-events:auto}

.profileInner{
  --accent:#4fbfc2;
  width:min(94vw,820px);
  max-height:90vh;
  border-radius:18px 18px 0 0;
  background:rgba(10,10,14,.92);
  backdrop-filter:blur(10px);
  overflow:hidden;
}

/* ================= HERO ================= */
.hero{
  position:relative;
}
.hero img{
  width:100%;
  display:block;
}

/* ↓↓↓ グラデーション：文字に被らない“下ギリギリ” ↓↓↓ */
.heroFade{
  position:absolute;
  left:0;right:0;bottom:0;
  height:20%;
  background:linear-gradient(
    to bottom,
    rgba(11,11,15,0) 0%,
    rgba(11,11,15,.35) 55%,
    rgba(11,11,15,.75) 82%,
    rgba(11,11,15,1) 100%
  );
  pointer-events:none;
  transition:opacity .25s ease;
}

/* S2時だけ少し強く */
.hero[data-season="s2"] .heroFade{
  opacity:1;
}
.hero[data-season="s1"] .heroFade{
  opacity:.65;
}

/* S2ボタン */
.heroTools{
  position:absolute;top:10px;right:10px;z-index:3;
}
.s2btn{
  width:56px;height:56px;
  border-radius:999px;
  border:none;
  background:var(--accent);
  font-family:inherit;
  letter-spacing:.14em;
  cursor:pointer;
}

/* ================= NAME OVERLAY ================= */
/* ★ ヒーロー画像に半分重ねる */
.nameOverlay{
  position:relative;
  margin-top:-56px; /* ← 重なり量 */
  padding-left:14px;
  z-index:4;
}
.nameImg{
  width:min(320px,78vw);
  filter:drop-shadow(0 14px 36px rgba(0,0,0,.55));
}

/* ================= INFO ================= */
.info{
  margin-top:8px;
  border-top:1px solid rgba(255,255,255,.08);
}
.desc{
  padding:14px;
  color:color-mix(in srgb,var(--accent) 92%,white 8%);
  line-height:1.85;
}
.meta{
  padding:0 14px 14px;
  font-size:12px;
  opacity:.8;
}

/* ================= NAV ================= */
.navRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  padding:10px;
  border-top:1px solid rgba(255,255,255,.08);
}
.navBtn{
  width:44px;height:44px;
  border-radius:999px;
  border:none;
  background:rgba(255,255,255,.06);
  color:color-mix(in srgb,var(--accent) 88%,white 12%);
}
.backBtn{
  flex:1;
  border:none;
  border-radius:999px;
  padding:12px;
  background:rgba(255,255,255,.05);
  color:color-mix(in srgb,var(--accent) 92%,white 8%);
  letter-spacing:.18em;
}
</style>
</head>

<body>

<header class="header">
  <a href="/" class="site-title">空想世界アリストテレス</a>
  <button class="menu-btn">☰</button>
</header>

<main class="container">
  <div class="title-ruby">character</div>
  <h1 class="page-title">空想世界 名簿記録</h1>
  <div id="grid" class="grid"></div>
</main>

<!-- PROFILE -->
<div class="profileOverlay" id="profileOverlay"></div>
<section class="profileModal" id="profileModal">
  <div class="profileInner" id="profileInner">

    <div class="hero" id="hero" data-season="s1">
      <div class="heroTools">
        <button class="s2btn" id="btnS2">S2</button>
      </div>
      <img id="heroImg" src="">
      <div class="heroFade"></div>
    </div>

    <!-- ★ 名前を重ねる -->
    <div class="nameOverlay">
      <img id="nameImg" class="nameImg" src="">
    </div>

    <div class="info">
      <div class="desc" id="descText"></div>
      <div class="meta" id="metaText"></div>

      <div class="navRow">
        <button class="navBtn" id="prevBtn">&lt;</button>
        <button class="backBtn" id="backBtn">Back to list</button>
        <button class="navBtn" id="nextBtn">&gt;</button>
      </div>
    </div>

  </div>
</section>

<script>
const grid=document.getElementById("grid");
const profileOverlay=document.getElementById("profileOverlay");
const profileModal=document.getElementById("profileModal");
const profileInner=document.getElementById("profileInner");
const hero=document.getElementById("hero");
const heroImg=document.getElementById("heroImg");
const nameImg=document.getElementById("nameImg");
const btnS2=document.getElementById("btnS2");
const descText=document.getElementById("descText");
const metaText=document.getElementById("metaText");
const backBtn=document.getElementById("backBtn");
const prevBtn=document.getElementById("prevBtn");
const nextBtn=document.getElementById("nextBtn");

const accents=[
 "#4fbfc2","#c24f4f","#e0a038","#80a87d","#7d92a8","#941c34",
 "#50e65d","#05079c","#6cbecc","#e83a83","#499151","#e0e0e0",
 "#ae76db","#c9a824"
];

const heroS1=[...Array(14)].map((_,i)=>`/images/profile/hero/${String(i+1).padStart(2,"0")}_s1.png`);
const heroS2=[...Array(14)].map((_,i)=>`/images/profile/hero/${String(i+1).padStart(2,"0")}_s2.png`);
const nameImgs=[...Array(14)].map((_,i)=>`/images/profile/name/${String(i+1).padStart(2,"0")}.png`);

let idx=0,season="s1";

grid.innerHTML=[...Array(14)].map((_,i)=>`
  <div class="card" data-i="${i}">
    <img src="/images/character/main${String(i+1).padStart(2,"0")}.png">
    <div class="num">${String(i+1).padStart(2,"0")}</div>
  </div>
`).join("");

grid.onclick=e=>{
  const c=e.target.closest(".card");
  if(!c)return;
  idx=+c.dataset.i;
  openProfile();
};

function openProfile(){
  profileOverlay.classList.add("open");
  profileModal.classList.add("open");
  load();
}
function closeProfile(){
  profileOverlay.classList.remove("open");
  profileModal.classList.remove("open");
}

function load(){
  profileInner.style.setProperty("--accent",accents[idx]);
  hero.dataset.season=season;
  heroImg.src=(season==="s1"?heroS1:heroS2)[idx];
  nameImg.src=nameImgs[idx];
  descText.textContent=`説明文（${String(idx+1).padStart(2,"0")}）`;
  metaText.textContent=`補足欄（${String(idx+1).padStart(2,"0")}）`;
}

btnS2.onclick=()=>{
  season=season==="s1"?"s2":"s1";
  load();
};

backBtn.onclick=closeProfile;
profileOverlay.onclick=closeProfile;
prevBtn.onclick=()=>{if(idx>0){idx--;season="s1";load()}};
nextBtn.onclick=()=>{if(idx<13){idx++;season="s1";load()}};
</script>

</body>
</html>
